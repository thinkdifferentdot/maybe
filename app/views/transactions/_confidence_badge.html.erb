<%# locals: (transaction:) %>

<% confidence = transaction.extra.dig("ai_categorization_confidence") %>

<% if confidence.present? %>
  <% percent = (confidence * 100).round %>
  <% bg_class, text_class = if percent >= 80
                              ["bg-green-500/5", "text-green-600"]
                            elsif percent >= 60
                              ["bg-yellow-500/5", "text-yellow-600"]
                            else
                              ["bg-orange-500/5", "text-orange-600"]
                            end %>

  <span class="inline-flex items-center gap-1 text-xs font-medium rounded-full px-1.5 py-0.5 border border-alpha-black-50 <%= bg_class %> <%= text_class %>" title="AI confidence score">
    <%= t("transactions.ai_categorize.confidence", percent: percent) %>
  </span>
<% end %>
